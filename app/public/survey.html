<html>

<head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <link rel="shortcut icon" href="#">
    <title>Friend Finder</title>
</head>

<body>
    <div class="container">
        <h1>Survey</h1>
        <hr>
        <h3><strong>About You</strong></h3>
        <div class="form-group">
            <label for="nameInput">Name (Required)</label>
            <input type="text" class="form-control" id="nameInput" placeholder="Name Here">
            <label for="photoLink">Link to Photo of Yourself (Required)</label>
            <input type="text" class="form-control" id="photoInput" placeholder="Image Link Here">
        </div>
        <form>
            <div class="form-group">
                <label for="photoUpload">Browse For Picture</label>
                <input type="file" class="form-control-file" id="photoUpload">
            </div>
        </form>
        <hr>
        <h3><strong>Question One</strong></h3>
        <div class="form-group">
            <label for="q1"><strong>Your mind is always buzzing with unexplored ideas or plans.</strong></label>
            <select class="custom-select" id="q1">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <hr>
        <h3><strong>Question Two</strong></h3>
        <div class="form-group">
            <label for="q2"><strong>Which of these numbers do you like the best? 1,2,3,4 or 5?</strong></label>
            <select class="custom-select" id="q2">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <hr>
        <h3><strong>Question Three</strong></h3>
        <div class="form-group">
            <label for="q3"><strong>You see popcorn in someone elses hands and your suppress the desire
                    to knock it out of their hands.
                </strong></label>
            <select class="custom-select" id="q3">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <hr>
        <h3><strong>Question Four</strong></h3>
        <div class="form-group">
            <label for="q4"><strong>You think cars are stupid and we should all ride helicopters.</strong></label>
            <select class="custom-select" id="q4">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <h3><strong>Question Five</strong></h3>
        <div class="form-group">
            <label for="q5"><strong>The color green is suspicious.</strong></label>
            <select class="custom-select" id="q5">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <h3><strong>Question Six</strong></h3>
        <div class="form-group">
            <label for="q6"><strong>34 + 23 = 1 big number</strong></label>
            <select class="custom-select" id="q6">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <h3><strong>Question Seven</strong></h3>
        <div class="form-group">
            <label for="q7"><strong>The clouds are actually a bunch of little balls of rice.</strong></label>
            <select class="custom-select" id="q7">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <h3><strong>Question Eight</strong></h3>
        <div class="form-group">
            <label for="q8"><strong>God is kinda just hangin' out on the daily.</strong></label>
            <select class="custom-select" id="q8">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <h3><strong>Question Nine</strong></h3>
        <div class="form-group">
            <label for="q9"><strong>All rocks are actually alive</strong></label>
            <select class="custom-select" id="q9">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <h3><strong>Question Ten</strong></h3>
        <div class="form-group">
            <label for="q10"><strong>Ladders should be illegal and we should all just stand on
                    eachothers shoulders like cheerleaders whenever we need something really high up.
                </strong></label>
            <select class="custom-select" id="q10">
                <option selected>Choose One . . .</option>
                <option values="1">1 (Strongly Disagree</option>
                <option values="2">2 (Disagree)</option>
                <option values="3">3 (Neutral)</option>
                <option values="4">4 (Agree)</option>
                <option values="5">5 (Strongly Agree)</option>
            </select>
        </div>

        <div class="text-right">
            <button type="submit" class="btn btn-primary btn-md" id="submitSurvey">
                <span class="fa fa-fire"></span>Finish!
            </button>
        </div>
    </div>
    <div class="modal" id="matchDisplay">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Best Match</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="matchName"></p>
                    <img class="matchPic" style="margin: auto">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    //form validation
    var allInput = true;
    //if ($("option:select") == "") {
    console.log("Please fill all out forms!");

    //} else {


        function showStuff(data) {

            $('.matchName').text(data.name);
            $('.matchPic').attr("src", data.photo);
            $('#matchDisplay').modal("toggle");

        }


    $("#submitSurvey").on("click", (event) => {
        console.log("buttonclicked")
        event.preventDefault();
        let newFriend = {
            name: $("#nameInput").val().trim(),
            photo: $("#photoInput").val().trim(),
            scores: [parseInt($("#q1 option:selected").attr("values")),
                $("#q2 option:selected").attr("values"),
                $("#q3 option:selected").attr("values"),
                $("#q4 option:selected").attr("values"),
                $("#q5 option:selected").attr("values"),
                $("#q6 option:selected").attr("values"),
                $("#q7 option:selected").attr("values"),
                $("#q8 option:selected").attr("values"),
                $("#q9 option:selected").attr("values"),
                $("#q10 option:selected").attr("values")
            ]
        };
       
        
        //console.log('newFriend', newFriend);
        $.post("/api/friends", newFriend, (data) => {
            console.log("survey.html", data);
            //alert("Thank you for taking our survey!");
            showStuff(data);
            console.log("post sent");


        });

        


        $.get("/api/friends").then((data) => {

            // $('.matchName').text(data.name);
            // $('.matchPic').attr("src", data.photo);

            // $('#matchDisplay').modal("toggle");
            // return json(data);
        })
    });
    // }
</script>

</html>